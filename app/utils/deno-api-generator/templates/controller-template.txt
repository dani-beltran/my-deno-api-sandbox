import { Request, Response } from "../../deps.ts";
import { Controller } from "../../utils/deno-api/controller.ts";
import  * as {{name}}Services from "./{{name}}.services.ts";
import { {{capitalizedName}}Schema, {{capitalizedName}} } from "./{{name}}.model.ts";
import { ValidatorFactory } from "../../utils/denodb-extended/validator-factory.ts";
import { CreatedResponse, UpdatedResponse } from "../../utils/denodb-extended/types.ts";

export async function add{{capitalizedName}}Ctrl(request: Request, response: Response<CreatedResponse>) {
  await Controller.handleRequest(
    request,
    response,
    {{name}}Services.add{{capitalizedName}},
    {{capitalizedName}}.validator,
  );
}

export async function get{{capitalizedName}}Ctrl(request: Request, response: Response<{{capitalizedName}}Schema>) {
  await Controller.handleRequest(
    request,
    response,
    {{name}}Services.get{{capitalizedName}},
    ValidatorFactory.buildGetValidator(),
  );
}

export async function list{{capitalizedName}}Ctrl(request: Request, response: Response<{{capitalizedName}}Schema[]>) {
  await Controller.handleRequest(
    request,
    response,
    {{name}}Services.list{{capitalizedName}},
    ValidatorFactory.buildListValidator(),
  );
}

export async function put{{capitalizedName}}Ctrl(request: Request, response: Response<UpdatedResponse>) {
  await Controller.handleRequest(
    request,
    response,
    {{name}}Services.update{{capitalizedName}},
    ValidatorFactory.buildUpdateValidator({{capitalizedName}}),
  );
}

export async function patch{{capitalizedName}}Ctrl(request: Request, response: Response<UpdatedResponse>) {
  await Controller.handleRequest(
    request,
    response,
    {{name}}Services.update{{capitalizedName}},
    ValidatorFactory.buildPatchValidator({{capitalizedName}}),
  );
}

export async function delete{{capitalizedName}}Ctrl(request: Request, response: Response<UpdatedResponse>) {
  await Controller.handleRequest(
    request,
    response,
    {{name}}Services.delete{{capitalizedName}},
    ValidatorFactory.buildDeleteValidator(),
  );
}